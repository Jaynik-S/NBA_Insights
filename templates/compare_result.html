<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compare Players</title>
    <link rel="stylesheet" href="/static/style.css">
    <!-- Add Chart.js library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Add Chart.js Zoom plugin -->
    <script src="https://cdn.jsdelivr.net/npm/hammerjs@2.0.8"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.0"></script>
    <!-- Add our custom JavaScript -->
    <script src="/static/js/compare_result.js"></script>
</head>
<body>
    <div class="container" id="players-container">
        <a href="{{ url_for('home') }}">
            <img src="{{ url_for('static', filename='img/logo.png') }}" alt="NBA Insights Logo" class="top-right-logo">
        </a>
        <h1>Compare Players</h1>
        <span id="player_count" style="display: none;">{{ players|length }}</span>
        <div class="chart-container">
            <div class="chart-controls">
                <label for="statCategorySelect">Select Stat Category to Compare:</label>
                <select id="statCategorySelect" onchange="updateChart(this.value)">
                    <option value="PTS_PG">Points Per Game (PTS_PER_GAME)</option>
                    <option value="REB_PG">Rebounds Per Game (REB_PER_GAME)</option>
                    <option value="AST_PG">Assists Per Game (AST_PER_GAME)</option>
                    <option value="STL_PG">Steals Per Game (STL_PER_GAME)</option>
                    <option value="BLK_PG">Blocks Per Game (BLK_PER_GAME)</option>
                    <option value="MIN_PG">Minutes Per Game (MIN_PER_GAME)</option>
                    <option value="OREB_PG">Offensive Rebounds Per Game (OREB_PG)</option>
                    <option value="DREB_PG">Defensive Rebounds Per Game (DREB_PG)</option>
                    <option value="PF_PG">Personal Fouls Per Game (PF_PG)</option>
                    <option value="FTA_PG">Free Throw Attempts Per Game (FTA_PG)</option>
                    <option value="FGA_PG">Field Goal Attempts Per Game (FGA_PG)</option>
                    <option value="FGM_PG">Field Goals Made Per Game (FGM_PG)</option>
                    <option value="FG3A_PG">3-Point Attempts Per Game (FG3A_PG)</option>
                    <option value="FG3M_PG">3-Points Made Per Game (FG3M_PG)</option>
                    <option value="FTM_PG">Free Throws Made Per Game (FTM_PG)</option>
                </select>
            </div>
            <canvas id="statsChart"></canvas>
        </div>
        <div class="stats-container">
            {% for player_id, player_data in players.items() %}
            <div class="stats-column">
                <h2>{{ player_data.name | title }}</h2>
                <select onchange="updateStats('{{ player_id }}', this.value)">
                    <option value="">Select Season</option>
                    {% for season in player_data.seasons %}
                        <option value="{{ season }}">{{ season }}</option>
                    {% endfor %}
                </select>
                <div id="player{{ player_id }}_season_stats">
                    <p>Select a season to view stats.</p> 
                </div>
                <pre id="player{{ player_id }}_stats" style="display:none;">{{ player_data.stats | tojson }}</pre>
                <pre id="player{{ player_id }}_columns" style="display:none;">{{ player_data.columns | tojson }}</pre>
                <div class="player-image">
                    <img src="https://ak-static.cms.nba.com/wp-content/uploads/headshots/nba/latest/260x190/{{ player_data.id }}.png" alt="{{ player_data.name }} Image">
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    <footer>
        <p>&copy; 2025 NBA Player Archetype Finder. <a href="https://github.com/Jaynik-S/NBA_Insights" target="_blank">GitHub</a></p>
    </footer>
</body>
</html>